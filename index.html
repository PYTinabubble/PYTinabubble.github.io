<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PYT ART — Portfolio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Montserrat:wght@200;300;400;500&display=swap"
      rel="stylesheet"
    />

    <style>
      body {
        font-family: "Montserrat", sans-serif;
        background-color: #fafafa;
        color: #1a1a1a;
      }
      .font-serif {
        font-family: "Playfair Display", serif;
      }
      .font-luxury {
        font-family: "Cinzel", serif;
      }

      /* Correction du Scroll Mobile */
      #lightbox {
        -webkit-overflow-scrolling: touch;
        display: none; /* Caché par défaut */
      }

      .hero-bg {
        animation: kenburns 40s infinite alternate ease-in-out;
        will-change: transform;
      }

      @keyframes kenburns {
        0% {
          transform: scale(1);
        }
        100% {
          transform: scale(1.15);
        }
      }

      .masonry-grid {
        columns: 1;
        column-gap: 2rem;
      }
      @media (min-width: 640px) {
        .masonry-grid {
          columns: 2;
        }
      }
      @media (min-width: 1024px) {
        .masonry-grid {
          columns: 3;
        }
      }

      .masonry-item {
        break-inside: avoid;
        margin-bottom: 2rem;
      }

      /* Animation d'apparition */
      .reveal {
        opacity: 0;
        transform: translateY(30px);
        transition: all 1s cubic-bezier(0.16, 1, 0.3, 1);
      }
      .reveal.active {
        opacity: 1;
        transform: translateY(0);
      }
    </style>
  </head>
  <body class="overflow-x-hidden">
    <header
      class="relative h-screen w-full overflow-hidden flex items-center justify-center"
    >
      <div class="absolute inset-0 z-0">
        <img
          src="Galeïde_01_uni.jpg"
          alt="Hero"
          class="w-full h-full object-cover hero-bg brightness-[0.7]"
        />
      </div>
      <div class="relative z-10 text-center text-white px-6">
        <p
          class="font-luxury text-[10px] tracking-[0.9em] uppercase mb-10 opacity-80"
        >
          Art contemporain
        </p>
        <h1
          class="font-serif text-5xl md:text-[8rem] leading-[0.85] tracking-tighter"
        >
          PYT <br /><span class="italic ml-8 md:ml-32">Art</span>
        </h1>
      </div>
    </header>

    <section class="py-24 px-6 md:px-12 lg:px-24">
      <div id="gallery" class="masonry-grid max-w-[1800px] mx-auto"></div>
    </section>

    <div id="lightbox" class="fixed inset-0 z-[200] bg-black overflow-y-auto">
      <button
        onclick="closeLightbox()"
        class="fixed top-6 right-6 text-white/50 hover:text-white z-[250] p-4"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-8 w-8"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="1"
            d="M6 18L18 6M6 6l12 12"
          />
        </svg>
      </button>

      <div
        class="min-h-screen w-full flex flex-col lg:flex-row items-center justify-start lg:justify-center p-6 md:p-12 lg:p-24 gap-12"
      >
        <div class="w-full lg:w-3/5 flex flex-col items-center mt-12 lg:mt-0">
          <img
            id="lb-image"
            src=""
            class="max-w-full max-h-[80vh] object-contain shadow-2xl transition-all duration-500"
          />
          <div
            id="lb-thumbnails"
            class="mt-8 flex flex-wrap gap-3 justify-center"
          ></div>
        </div>

        <div class="w-full lg:w-2/5 text-white pb-12 lg:pb-0">
          <h2 id="lb-title" class="font-serif text-4xl md:text-6xl mb-6"></h2>
          <p
            id="lb-info"
            class="text-[10px] uppercase tracking-[0.5em] text-gray-400 mb-8"
          ></p>
          <p
            id="lb-desc"
            class="text-xl md:text-2xl text-gray-300 font-serif italic mb-12 leading-relaxed"
          ></p>

          <div class="pt-8 border-t border-white/10">
            <p
              id="lb-details"
              class="text-[11px] text-[#bcbcbc] uppercase tracking-[0.3em] leading-loose font-light mb-8"
            ></p>
            <button
              onclick="closeLightbox()"
              class="px-8 py-3 border border-white/20 text-[10px] uppercase tracking-widest hover:bg-white hover:text-black transition-all"
            >
              Retour
            </button>
          </div>
        </div>
      </div>
    </div>

    <script type="module">
      // On importe tes données depuis le fichier séparé
      import { mesToiles } from "./toiles.js";

      function renderGallery() {
        const container = document.getElementById("gallery");
        const sorted = [...mesToiles].sort(
          (a, b) => new Date(b.dateAjout) - new Date(a.dateAjout)
        );

        container.innerHTML = sorted
          .map(
            (toile) => `
                <div class="masonry-item reveal group cursor-pointer" onclick="window.openLightbox('${toile.id}')">
                    <div class="relative overflow-hidden bg-gray-900 shadow-lg">
                        <img src="${toile.images[0]}" class="w-full h-auto transform transition-transform duration-1000 group-hover:scale-105">
                        <div class="absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity"></div>
                    </div>
                    <div class="mt-4 flex justify-between items-center opacity-60 group-hover:opacity-100">
                        <span class="text-[10px] uppercase tracking-widest font-bold">${toile.titre}</span>
                        <span class="text-[9px] uppercase tracking-tighter">${toile.taille}</span>
                    </div>
                </div>
            `
          )
          .join("");

        initObserver();
      }

      window.openLightbox = function (id) {
        const toile = mesToiles.find((t) => t.id === id);
        if (!toile) return;

        document.getElementById("lb-title").innerText = toile.titre;
        document.getElementById("lb-info").innerText = `${toile.taille} — ${
          toile.dateAjout.split("-")[0]
        }`;
        document.getElementById("lb-desc").innerText = toile.description;
        // On affiche tes détails personnalisés ici
        document.getElementById("lb-details").innerText =
          toile.details || "PIÈCE UNIQUE — SIGNATURE PYT — CERTIFICAT FOURNI.";

        updateMainImage(toile.images[0]);

        const thumbs = document.getElementById("lb-thumbnails");
        thumbs.innerHTML = toile.images
          .map(
            (img, i) => `
                <button onclick="window.updateMainImage('${img}', this)" class="w-16 h-16 border border-white/20 opacity-40 hover:opacity-100 transition-all ${
              i === 0 ? "opacity-100 border-white" : ""
            }">
                    <img src="${img}" class="w-full h-full object-cover">
                </button>
            `
          )
          .join("");

        document.getElementById("lightbox").style.display = "block";
        document.body.style.overflow = "hidden";
      };

      window.updateMainImage = function (url, btn) {
        const img = document.getElementById("lb-image");
        img.src = url;
        if (btn) {
          document
            .querySelectorAll("#lb-thumbnails button")
            .forEach((b) => b.classList.remove("opacity-100", "border-white"));
          btn.classList.add("opacity-100", "border-white");
        }
      };

      window.closeLightbox = function () {
        document.getElementById("lightbox").style.display = "none";
        document.body.style.overflow = "auto";
      };

      function initObserver() {
        const observer = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) entry.target.classList.add("active");
            });
          },
          { threshold: 0.1 }
        );
        document
          .querySelectorAll(".reveal")
          .forEach((el) => observer.observe(el));
      }

      window.addEventListener("DOMContentLoaded", renderGallery);
    </script>
  </body>
</html>
